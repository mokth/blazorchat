@using blazorchat.Models

<div class="user-list">
    <h4>Chats</h4>
    <div class="users">
        <button class="user-item group-chat @(IsGroupSelected ? "selected" : "")" @onclick="OnSelectGroup">
            <div class="user-avatar group-avatar">
                ðŸ‘¥
            </div>
            <div class="user-info">
                <span class="user-name">Group Chat</span>
                <span class="user-status">Everyone</span>
            </div>
        </button>

        @foreach (var user in Users.Where(user => user.Id != CurrentUserId))
        {
            <button class="user-item @(SelectedUserId == user.Id ? "selected" : "")" @onclick="() => OnSelectUser.InvokeAsync(user.Id)">
                <div class="user-avatar">
                    @user.Name.Substring(0, 1).ToUpper()
                </div>
                <div class="user-info">
                    <span class="user-name">@user.Name</span>
                    <span class="user-status">@(user.IsOnline ? "Online" : "Offline")</span>
                </div>
                @if (user.IsOnline)
                {
                    <div class="online-indicator"></div>
                }
            </button>
        }
    </div>
</div>

@code {
    [Parameter] public List<User> Users { get; set; } = new();
    [Parameter] public string CurrentUserId { get; set; } = "";
    [Parameter] public string? SelectedUserId { get; set; }
    [Parameter] public bool IsGroupSelected { get; set; }
    [Parameter] public EventCallback<string> OnSelectUser { get; set; }
    [Parameter] public EventCallback OnSelectGroup { get; set; }
}
