@using blazorchat.Models

<div class="user-list">
    <h4>Online Users (@Users.Count)</h4>
    <div class="users-container">
        @foreach (var user in Users)
        {
            <div class="user-item">
                <div class="user-avatar">
                    @if (!string.IsNullOrEmpty(user.Avatar))
                    {
                        <img src="@user.Avatar" alt="@user.Name" />
                    }
                    else
                    {
                        <span class="avatar-initials">@GetInitials(user.Name)</span>
                    }
                </div>
                <div class="user-info">
                    <span class="user-name">@user.Name</span>
                    <span class="user-status @(user.IsOnline ? "online" : "offline")">
                        @(user.IsOnline ? "Online" : "Offline")
                    </span>
                </div>
            </div>
        }
    </div>
</div>

@code {
    [Parameter] public List<User> Users { get; set; } = new();

    private string GetInitials(string name)
    {
        if (string.IsNullOrEmpty(name)) return "?";
        
        var parts = name.Split(' ', StringSplitOptions.RemoveEmptyEntries);
        if (parts.Length == 1) return parts[0].Substring(0, 1).ToUpper();
        
        return $"{parts[0][0]}{parts[^1][0]}".ToUpper();
    }
}
